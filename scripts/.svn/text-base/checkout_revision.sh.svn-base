#!/bin/bash

#ARGS (1) revision number (2) new directory
if [ $# -ne 2 ]; then
   echo "usage: $0 <revision number> <new directory path>"
   exit 1
fi 
if [ -z "$GEOS_TRUNK" ]; then
    export GEOS_TRUNK=~/apps/geos_trunk
    if [ -d "$GEOS_TRUNK" ]; then
	echo "Setting default path to GEOS trunk: $GEOS_TRUNK"
    else
	echo "Cannot set default path to GEOS trunk: $GEOS_TRUNK"
	exit 1
    fi
fi
if [ -d "$2" ]; then
    rm -rf $2
fi
mkdir $2
cd $2
svn co -r $1 https://sourceforge.llnl.gov/svn/repos/gpac/trunk/src
ln -s $GEOS_TRUNK/external_libs external_libs
ln -s $GEOS_TRUNK/scripts scripts
ln -s $GEOS_TRUNK/test test
ln -s $GEOS_TRUNK/Make.local.defs Make.local.defs
ln -s $GEOS_TRUNK/documents documents
ln -s $GEOS_TRUNK/examples examples
ln -s $GEOS_TRUNK/tools tools

export USR=`whoami`
ln -s $GEOS_TRUNK/Make.local.defs.$USR Make.local.defs.$USR
