<?xml version="1.0" ?>
<!-- 
srun -p pdebug -n 1 /usr/workspace/crook5/GEOS/build-ruby-clang-14-release/bin/geosx -i mpm_dfgMovingGrid.xml
srun -n 4 /usr/workspace/crook5/GEOS/build-ruby-clang-14-release/bin/geosx -i mpm_dfgMovingGrid.xml
-->
<Problem>

  <Mesh>
    <InternalMesh
      name="backgroundGrid"
      elementTypes="{ C3D8 }"
      xCoords="{-0.75,0.75}"
      yCoords="{-0.75,0.75}"
      zCoords="{-0.375,0.375}"
      nx="{6}"
      ny="{6}"
      nz="{3}"
      periodic="{ 0, 0, 0}"
      cellBlockNames="{ cb1 }"/>
      
    <ParticleMesh
      name="particles"
      particleFile="mpmParticleFile_dfgMovingGrid"
      particleBlockNames="{ pb0, pb1 }"
      particleTypes="{ CPDI, CPDI }"/>
  </Mesh>

  <ElementRegions>
    <CellElementRegion
      name="CellRegion1"
      meshBody="backgroundGrid"
      cellBlocks="{ cb1 }"
      materialList="{ null }"/>
  </ElementRegions>

  <ParticleRegions>
    <ParticleRegion
        name="ParticleRegion1"
        meshBody="particles"
        particleBlocks="{ pb0 }"
        materialList="{ stiff }"/>
    <ParticleRegion
        name="ParticleRegion2"
        meshBody="particles"
        particleBlocks="{ pb1 }"
        materialList="{ compliant }"/>
  </ParticleRegions>

  <Solvers
    gravityVector="{ 0.0, 0.0, 0.0 }">
    <SolidMechanics_MPM
      name="mpmsolve"
      discretization="FE1"
      targetRegions="{ backgroundGrid/CellRegion1, particles/ParticleRegion1, particles/ParticleRegion2 }"
      timeIntegrationOption="ExplicitDynamic"
      updateMethod="FLIP"
      cflFactor="0.25"
      initialDt="1e-16"
      damageFieldPartitioning="1"
      planeStrain="1"
      needsNeighborList="1"
      prescribedBoundaryFTable="1"
      fTable="{{0.0, 1.0, 1.0, 1.0}, {0.1, 1.0, 0.95, 1.0}}"
      fTableInterpType="Cosine"
      boundaryConditionTypes="{2, 2, 2, 2, 1, 1}"
      neighborRadius="-1.01">

    </SolidMechanics_MPM>
  </Solvers>

  <Constitutive>
    <ElasticIsotropic
      name="null"
      defaultDensity="1000"
      defaultBulkModulus="1.0e9"
      defaultShearModulus="1.0e9"/>
    
    <ElasticIsotropic
    	name="stiff"
    	defaultDensity="1000"
    	defaultBulkModulus="10.0e9"
    	defaultShearModulus="10.0e9"/>
    <ElasticIsotropic
    	name="compliant"
    	defaultDensity="1000"
    	defaultBulkModulus="10.0e8"
    	defaultShearModulus="10.0e8"/>
    
  </Constitutive>

  <Events
    maxTime="0.1">
    <PeriodicEvent
      name="solverApplications"
      target="/Solvers/mpmsolve"/>
    <PeriodicEvent
      name="outputs"
      timeFrequency="0.001"
      target="/Outputs/vtkOutput"/>
    <PeriodicEvent
      name="restart"
      timeFrequency="0.01"
      target="/Outputs/restartOutput"/> 
    <HaltEvent
      maxRuntime="300.0"/>
  </Events>

  <NumericalMethods>
    <FiniteElements>
      <FiniteElementSpace
        name="FE1"
        order="1"/>
    </FiniteElements>
  </NumericalMethods>

  <Outputs>
    <VTK
      name="vtkOutput"
      format="ascii"/>
    <Restart
      name="restartOutput"/>
  </Outputs>

</Problem>

